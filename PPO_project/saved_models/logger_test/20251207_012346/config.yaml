# 基于强化学习的轨迹平滑 - 默认配置文件
# 该配置对应RCIM期刊论文实验设置

# 环境配置
environment:
  epsilon: 0.5              # 总带宽(m) - Pl到Pr的距离
  interpolation_period: 0.1 # 插值周期(s)
  max_steps: 3000           # 最大步数

# 运动学约束参数 (KCM模块)
kinematic_constraints:
  # 线性运动约束
  MAX_VEL: 1.0              # 最大线速度 (m/s)
  MAX_ACC: 2.0              # 最大线加速度 (m/s²)
  MAX_JERK: 3.0             # 最大线捷度 (m/s³)
  
  # 角运动约束
  MAX_ANG_VEL: 1.5          # 最大角速度 (rad/s)
  MAX_ANG_ACC: 3.0          # 最大角加速度 (rad/s²)
  MAX_ANG_JERK: 5.0         # 最大角捷度 (rad/s³)

# 奖励函数权重
reward_weights:
  w_e: 1.0                  # 跟踪误差权重
  w_c: 0.5                  # 舒适性(捷度)权重
  w_j: 0.3                  # 平滑性权重
  w_progress: 2.0           # 进度奖励权重
  w_direction: 0.5          # 方向对齐权重
  w_velocity: 0.2           # 速度合理性权重
  w_constraint: 0.2         # 约束干预惩罚权重

# PPO算法参数
ppo:
  actor_lr: 0.0003          # Actor学习率
  critic_lr: 0.001          # Critic学习率
  hidden_dim: 128           # 隐藏层维度
  gamma: 0.99               # 折扣因子
  lmbda: 0.95               # GAE参数
  epochs: 10                # 每次更新的epoch数
  eps: 0.2                  # PPO clip参数
  batch_size: 64            # 批次大小

# 训练配置
training:
  num_episodes: 500         # 训练回合数
  smoothing_factor: 0.9     # 奖励平滑因子
  save_interval: 100        # 模型保存间隔
  log_interval: 50          # 日志打印间隔
  checkpoint_interval_steps: 2048  # latest_checkpoint 覆盖频率（环境步数）

# 路径定义 (参考路径Pm)
path:
  # 路径类型: 'waypoints', 's_shape', 'butterfly', 'lemniscate', 'u_shape', 'star'
  type: 'waypoints'
  
  # 使用原始U型路径
  waypoints:
    - [0.0, 0.0]
    - [10.0, 0.0]
    - [10.0, 10.0]
    - [0.0, 10.0]
    - [0.0, 0.0]
  closed: true              # 是否为闭合路径
  
  # 参数化路径配置（当type不是'waypoints'时使用）
  scale: 10.0               # 路径缩放比例
  num_points: 200           # 采样点数量
  
  # S形路径参数
  s_shape:
    amplitude: 5.0          # 振幅
    periods: 2.0            # 周期数
  
  # 蝶形路径参数
  butterfly:
    sharpness: 1.0          # 尖锐度
    center: [0.0, 0.0]      # 中心点
  
  # 星形路径参数
  star:
    inner_radius: 4.0       # 内圆半径
    star_points: 5          # 星形顶点数

# 实验模式配置
experiment:
  mode: 'train'             # 'train', 'test', 'ablation_no_kcm', 'ablation_no_reward', 'baseline_nnc', 'baseline_s_curve'
  baseline_type: null       # 基线类型: 'nnc' 或 's_curve'
  enable_kcm: true          # 是否启用KCM模块（用于消融实验）
  model_path: null          # 测试模式下的模型路径
