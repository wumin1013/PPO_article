# 优化指令 03：状态空间重构与预瞄机制

## 背景
为了实现“内切入弯”，Agent 必须感知前方路径相对于当前车体的局部几何关系。这将改变神经网络的输入维度。

## 任务
重构 `src/environment/cnc_env.py` 和 `src/algorithms/ppo.py` (如果输入维度是硬编码的)。

## 执行要求
1.  **增强观测空间 (Observation Space):**
    * 增加 `lookahead_features` 维度。
    * **坐标系转换 (关键):** 获取前方 N 个路径点，将其转换到 **Agent 局部坐标系 (Body Frame)**。
    * **特征计算:**
        * $(dx, dy)$: 明确弯道的横向和纵向距离。
        * **曲率变化率 (Curvature Rate):** 引入 $d\kappa/ds$，让 Agent 感知 Jerk 限制，提前平滑减速。
    
2.  **网络自适应:** 确保 PPO 网络的输入层能自动读取 `env.observation_space.shape`，避免因维度变化报错。

## 自验证 (可视化增强版)
编写 `test_perception.py`：
1. 将 Agent 置于直线，前方 10mm 处有一个左转弯道。
2. 打印并**简单绘制 (matplotlib)** 转换后的预瞄点分布。
3. **断言:** 在局部坐标系图中，预瞄点应向 Y 轴正方向（或负方向，视定义而定）偏转，证明坐标变换数学逻辑正确。